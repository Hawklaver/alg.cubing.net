<html>
<head>
<title>alg.garron.us (v1.1.9beta)</title>
<!-- Lucas Garron, 2009-03-25 -->
<!-- Alg Animation Tool -->
<!-- alg.garron.us (v1.1.9) -->
<!-- This file may be freely downloaded/modified/distributed, if it is marked as a derivative and the source is attributed.-->
<!-- Applets by Werner Randelshofer (http://www.randelshofer.ch/) -->
<!--
TODO List:

Dim colors to half-tones to emphasize pieces (for L6E, etc).
Click option text selects corresponding radio.
Tool Panels: Alg manipulation (mirror, inverse, derotate...), reconstruction preparation (with load/save feature?), adding algs/solves to db, tinyurl-like-URL-shortening.
Random scramble for ini.

Proper, general commutator/conjugate suppart.
Other puzzles (Square-1, Pyraminx).
Allow static image generation with iCube: http://software.rubikscube.info/icube/ (Requires Javascript parser and sim.)

-->

<!-- Skin CSS file -->
<link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/2.6.0/build/assets/skins/sam/resize.css">
<!-- Utility Dependencies -->
<script type="text/javascript" src="http://yui.yahooapis.com/2.6.0/build/yahoo-dom-event/yahoo-dom-event.js"></script> 
<script type="text/javascript" src="http://yui.yahooapis.com/2.6.0/build/dragdrop/dragdrop-min.js"></script> 
<script type="text/javascript" src="http://yui.yahooapis.com/2.6.0/build/element/element-beta-min.js"></script> 
<!-- Source file for the Resize Utility -->
<script src="http://yui.yahooapis.com/2.6.0/build/resize/resize-min.js"></script>
<style type="text/css" media="screen">
    #appletdiv {height: 300px; width: 100%; padding: 2px; border: 1px solid black;}
</style>


<script type="text/javascript">

function gup( name , alt ){var results = RegExp( "[\\?&]"+name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]")+"=([^&#<]*)" ).exec( window.location.href ); if( results==null ) return alt; else return results[1];};


//Should I implement a general (slower?) function that takes an array?
function paramdefault(paramname)
{
	switch (paramname)
	{
	case 'ini': return('');
	case 'alg': return('');
	case 'name': return('alg.garron.us');
	case 'cube': return('3x3x3');
	case 'notation': return('sign');
	case 'animtype': return('gen');
	case 'scheme': return('grobyw');
	case 'stage': return('full');
	default: return('');
	}
}

function propername(param, str)
{
	switch (param)
	{
	case 'notation': {
		switch (str)
		{
		case 'sign': return('SiGN');
		case 'wca': return('WCA');
		case 'superset': return('Superset');
		default: return str;
		};
		break;}
	case 'animtype': {
		switch (str)
		{
		case 'solve': return('Solver');
		case 'gen': return('Generator');
		default: return str;
		};
		break;}
	case 'scheme': {
		switch (str)
		{
		case 'grobyw': return('BOY');
		case 'groybw': return('Japanese');
		default: return str;
		};
		break;}
	case 'stage': {
		switch (str)
		{
		case 'full': return('Full');
		default: return str;
		};
		break;}
	default: return str;
	}
}

function gupdef(name)
{
 	return gup(name,paramdefault(name));
}
 
var applet_ini=unescapeapplet(gupdef('ini'));
var applet_alg=unescapeapplet(gupdef('alg'));
var p_ini=unescapealg(gupdef('ini'));
var p_alg=unescapealg(gupdef('alg'));
var p_name=unescapealg(gupdef('name'));
var p_cube=gupdef('cube','3x3x3');
var p_notation=gupdef('notation');
var p_animtype=gupdef('animtype');
var p_scheme=gupdef('scheme');
var p_stage=gupdef('stage');

if(p_name!=paramdefault('name'))
	document.title=p_name+' - alg.garron.us';

function colorcharconvert(colchar)
{
	switch (colchar)
	{
	case "y": return("ffff00");
	case "w": return("ffffff");
	case "b": return("0000ff");
	case "g": return("00ff00");
	case "o": return("ff8800");
	case "r": return("ff0000");
	case "x": return("888888");
	default: return("000000");
	}
}


function hexscheme(str)
{
	var strout=("x"+str).split("");
	for (x in strout)
		strout[x]="0x"+colorcharconvert(strout[x]);
	return strout.join(",");
}


function stickerout(sarr)
{
	return '<param name="stickersFront" value="'+sarr[0]+'"><param name="stickersRight" value="'+sarr[1]
		+'"><param name="stickersDown" value="'+sarr[2]+'"><param name="stickersBack" value="'+sarr[3]
		+'"><param name="stickersLeft" value="'+sarr[4]+'"><param name="stickersUp" value="'+sarr[5]+'">';
}

function stickercube(stickerspec)
{
switch (stickerspec)
{
	case "full": case "ZBLL": case "ELL": return stickerout(['1,1,1,1,1,1,1,1,1','2,2,2,2,2,2,2,2,2','3,3,3,3,3,3,3,3,3',
		'4,4,4,4,4,4,4,4,4','5,5,5,5,5,5,5,5,5','6,6,6,6,6,6,6,6,6']); break;
	case "EO": return stickerout(['0,0,0,6,1,6,0,0,0','0,0,0,0,2,0,0,0,0','0,0,0,0,3,0,0,0,0',
		'0,0,0,6,4,6,0,0,0','0,6,0,6,5,6,0,6,0','0,6,0,6,6,6,0,6,0']); break;
	case "EOLine": return stickerout(['0,0,0,6,1,6,0,1,0','0,0,0,0,2,0,0,2,0','0,0,0,0,3,0,0,3,0',
		'0,0,0,6,4,6,0,4,0','0,5,0,5,5,5,0,5,0','0,6,0,6,6,6,0,6,0']); break;
	case "F2L": return stickerout(['0,0,0,1,1,1,1,1,1','0,0,0,2,2,2,2,2,2','0,0,0,3,3,3,3,3,3',
		'0,0,0,4,4,4,4,4,4','5,5,5,5,5,5,5,5,5','0,0,0,0,6,0,0,0,0']); break;
	case "FRSlot": return stickerout(['0,0,0,0,1,1,0,1,1','0,0,0,2,2,0,2,2,0','0,0,0,0,3,0,0,3,0',
		'0,0,0,0,4,0,0,4,0','5,5,5,5,5,5,5,5,5','6,6,6,6,6,6,6,6,6']); break;
	case "CLS": case "OLL": case "WVLS": return stickerout(['0,0,0,1,1,1,1,1,1','0,0,0,2,2,2,2,2,2','0,0,0,3,3,3,3,3,3',
		'0,0,0,4,4,4,4,4,4','5,5,5,5,5,5,5,5,5','6,6,6,6,6,6,6,6,6']); break;
	case "ZBLS": return stickerout(['0,0,0,1,1,1,1,1,1','0,0,0,2,2,2,2,2,2','0,0,0,3,3,3,3,3,3',
		'0,0,0,4,4,4,4,4,4','5,5,5,5,5,5,5,5,5','0,6,0,6,6,6,0,6,0']); break;
	case "ELS": return stickerout(['0,0,0,1,1,1,1,1,0','0,0,0,2,2,2,0,2,2','0,0,0,3,3,3,3,3,3',
		'0,0,0,4,4,4,4,4,4','5,5,0,5,5,5,5,5,5','0,6,0,6,6,6,0,6,0']); break;
	case "COLL": return stickerout(['1,0,1,1,1,1,1,1,1','2,0,2,2,2,2,2,2,2','3,0,3,3,3,3,3,3,3',
		'4,0,4,4,4,4,4,4,4','5,5,5,5,5,5,5,5,5','6,6,6,6,6,6,6,6,6']); break;
	case "CLL": return stickerout(['1,0,1,1,1,1,1,1,1','2,0,2,2,2,2,2,2,2','3,0,3,3,3,3,3,3,3',
		'4,0,4,4,4,4,4,4,4','5,5,5,5,5,5,5,5,5','6,0,6,0,6,0,6,0,6']); break;
	case "CMLL": return stickerout(['1,0,1,1,0,1,1,0,1','2,0,2,2,2,2,2,2,2','3,0,3,3,3,3,3,3,3',
		'4,0,4,4,0,4,4,0,4','5,0,5,5,0,5,5,0,5','6,0,6,0,0,0,6,0,6']); break;
	default: return stickerout(['1,1,1,1,1,1,1,1,1','2,2,2,2,2,2,2,2,2','3,3,3,3,3,3,3,3,3',
		'4,4,4,4,4,4,4,4,4','5,5,5,5,5,5,5,5,5','6,6,6,6,6,6,6,6,6']); break;
		
	//L6E, centers
}
}

function paramadd(paramname, paramval, paramdefaultval)
{
  if ((paramval=="")||(paramval==paramdefaultval))
  	return "";
  else
  		return "&"+paramname+"="+paramval;
}

function paramadddef(paramname, paramval)
{
  if ((paramval=="")||(paramval==paramdefault(paramname)))
  	return "";
  else
  		return "&"+paramname+"="+paramval;
}

//escape ampersand?
function escapealg(algstr){return algstr.replace(/\n/g, '%0A').replace(/-/g, '%2D').replace(/\'/g, '-').replace(/ /g, '_');}
function unescapealg(algstr){return unescape(algstr.replace(/_/g,' ').replace(/-/g,'\''));}
function unescapeapplet(algstr){return unescapealg(algstr);}
function highlightinput(inputId) {inputId.focus(); inputId.select();}
function nameedit() {titlespan.innerHTML='<input id="titleinput" type="text" name="titleinput" value="'+p_name+'" onload="javascript:this.focus();" onchange="javascript:p_name=this.value;" onblur="javascript:namesolidify()" style="font-size: 150%; text-align: center;"/>';} 
function namesolidify() {titlespan.innerHTML='<span name="titletext" id="titletext" "style="font-size: 200%; font-weight: bold;" onclick="javascript:nameedit()">'+p_name+'<\/span>';}
  
function loadapplet()
{
var jarfile=p_cube.replace('2x2x2','PocketPlayer').replace('3x3x3','RubikPlayer').replace('4x4x4','RevengePlayer').replace('5x5x5','ProfessorPlayer').replace('6x6x6','VCube6Player').replace('7x7x7','VCube7Player');
var notationfile='notation/'+p_notation+'.xml';
var stickerappletcode='';
if (p_cube=='3x3x3') stickerappletcode=stickercube(p_stage);

var URLparams = makeURLparams();
if (URLparams=="?alg=")
	URLparams='[url=http://alg.garron.us/]alg.garron.us[/url]';
else
	URLparams='[url=http://alg.garron.us/'+URLparams+']'+p_alg+'[/url]'; //p_alg covered by setalgs() in makeURLparams().

righthalf.innerHTML='<input id="copyurl" type="text" name="copyurl" readonly="readonly" value="'+URLparams+'" onclick="this.focus();this.select();" size="30"/>'
	+'\n<div name="appletdiv" id="appletdiv">'
	+'\n<applet code="'+jarfile+'.class" archive="applet/'+jarfile+'.jar" width="100%" height="100%">'
	+'\n <param name="scriptType" value="'+p_animtype.replace('gen','Generator').replace('solve','Solver')+'">'
	+'\n <param name="resourceFile" value="'+notationfile+'"/><param name="notation" value="'+p_cube+'"/>'
	+'\n <param name="colorTable" value="'+hexscheme(p_scheme)+'"><param name="faces" value="1,2,3,4,5,6">'
	+stickerappletcode
	+'\n <param name="initScript" value="'+applet_ini+'">'
	+'\n <param name="script" value="'+applet_alg+'">'
	+'\n<\/applet>'
	+'\n<\/div>';

var resize = new YAHOO.util.Resize('appletdiv');
}

function showhelp()
{
window.location.hash="#help"
righthalf.innerHTML='<span "style="font-size: 200%; font-weight: bold;">Help<\/span>'
+'\n<br>alg.garron.us is a tool for viewing and sharing algs.'
+'\n<ul style="text-align: left;">'
+'\n<li>Just type an alg into the lower textbox and click <i>Reload<\/i> or <i>Test<\/i>.<\/li>'
+'\n<li>If you would like to add pre-moves (like a scramble), type them into the upper textbox.<\/li>'
+'\n'
+'\n<li><u>Buttons<\/u>:<\/li>'
+'\n<ul style="text-align: left;">'
+'\n<li>Reset: Reload page with algs/options cleared.<\/li>'
+'\n<li>Reload: Reload page with selected settings.<\/li>'
+'\n<li>Test: Refresh applet with current settings.<\/a><\/li>'
+'\n<\/ul>'
+'\n'
+'\n<li><u>Puzzle<\/u>: You can select 2x2x2-7x7x7<\/li>'
+'\n'
+'\n<li><u>Notation<\/u>:<\/li>'
+'\n<ul style="text-align: left;">'
+'\n<li>SiGN: Simple General Notation<\/li>'
+'\n<li>WCA: <a href="http://www.worldcubeassociation.org/regulations/#notation">WCA Official Notation<\/a><\/li>'
+'\n<li>Superset: Werner Randelshofer\'s <a href="http://www.randelshofer.ch/rubikplayer/documentation/superset_eng.html">Superset ENG<\/a><\/li>'
+'\n<\/ul>'
+'\n'
+'\n<li><u>Animation Type<\/u>:<\/li>'
+'\n<ul style="text-align: left;">'
+'\n<li>Solver: View the moves solving the puzzle.<\/li>'
+'\n<li>Generator: View moves applied moves to a solved state<\/li>'
+'\n<\/ul>'
+'\n'
+'\n<li><u>Color Scheme<\/u>: Set colors for FRLBDU or pick a standard scheme.<\/li>'
+'\n'
+'\n<li><u>Stage<\/u>: 3x3x3 ONLY - Gray out pieces to emphasize the pieces of a solving stage<\/li>'
+'\n<ul style="text-align: left;">'
+'\n<li>Full, F2L, OLL/CLS, ZBLS, CMLL<\/li>'
+'\n<li>Hidden: CLL, COLL, ELL, ELS, EO, EOLine, FRSlot, WVLS, ZBLL.<\/li>'
+'\n<\/ul>'
+'\n'
+'\n<li>Offline use is possible, but not "supported" yet.<\/li>'
+'\n'
+'\n<\/ul>'
+'\n<\/p>'
+'\n<p style="text-align: center;"><button type="button" onclick="javascript:setalgs();loadapplet()">Hide Help, Load Applet<\/button><\/p>'
;

}

function setalgs()
{
applet_ini=document.getElementById('ini').value;
applet_alg=document.getElementById('alg').value;
p_ini=document.getElementById('ini').value;
p_alg=document.getElementById('alg').value;
}

function makeURLparams()
{
	setalgs();
	var url="?alg="+escapealg(p_alg);
	url=url+paramadddef('ini',escapealg(p_ini));
	url=url+paramadddef('name',escapealg(p_name));
	url=url+paramadddef('cube',p_cube);
	url=url+paramadddef('notation',p_notation);
	url=url+paramadddef('animtype',p_animtype);
	url=url+paramadddef('scheme',p_scheme);
		var p_stage_url=p_stage;
		//if (p_cube!='3x3x3') p_stage_url=;;;
	url=url+paramadddef('stage',p_stage_url);
	return url;
}

function submitalg()
{
	window.location=makeURLparams();
}
  


</script>
 
 
</head>
<body bgcolor="#ffffdd">
<center>



<table width="100%" height="100%" style="text-align: center;" border="1" cellspacing="1" cellpadding="4">
<tr width="50%">
<td name="lefthalf" width="1*" style="vertical-align: top;">
<span name="titlespan" id="titlespan"> 
<script language="JavaScript">
document.write('<span name="titletext" id="titletext" "style="font-size: 200%; font-weight: bold;" onclick="javascript:nameedit()">'+p_name+'<\/span>');
</script>
</span>
<!-- <span style="font-size: 125%;">	Si<i>mple</i> G<i>eneral</i> N<i>otation</i></span>-->

<form  action="SiGN_test.htm" method="get">

<span title="Cube Size">
<script language="JavaScript">document.write('<u>'+p_cube+'<\/u> - ');</script>
<input type="radio" name="cube" id="cube2x2x2" value="2" onclick="p_cube='2x2x2'">2 
<input type="radio" name="cube" id="cube3x3x3" value="3" onclick="p_cube='3x3x3'">3 
<input type="radio" name="cube" id="cube4x4x4" value="4" onclick="p_cube='4x4x4'">4 
<input type="radio" name="cube" id="cube5x5x5" value="5" onclick="p_cube='5x5x5'">5 
<input type="radio" name="cube" id="cube6x6x6" value="6" onclick="p_cube='6x6x6'">6 
<input type="radio" name="cube" id="cube7x7x7" value="7" onclick="p_cube='7x7x7'">7
</span>


<script language="JavaScript">
document.write('<br><span title="Scramble"><textarea name="ini" id="ini" rows="2" cols="50" style="background: #ffffee;">'+p_ini+'<\/textarea></span>');
</script>
<script language="JavaScript">
document.write('<br><span title="Algorithm"><textarea name="alg" id="alg" rows="12" cols="50">'+p_alg+'<\/textarea></span>');
</script>
<br>
<button type="button" onclick="window.location='?'">Reset</button>
<button type="button" onclick="javascript:submitalg()">Reload!</button>
<button type="button" onclick="javascript:setalgs();loadapplet()">Test</button>
<!--<input type="submit" value="Submit">-->

<br>
<span id="options">
<span title="Notation">
<br><script language="JavaScript">document.write('<u>Notation<\/u>: ');</script>
<input type="radio" name="notation" id="notationsign" value="sign" onclick="p_notation='sign'">SiGN 
<input type="radio" name="notation" id="notationWCA" value="WCA" onclick="p_notation='WCA'">WCA
<input type="radio" name="notation" id="notationsuperset" value="superset" onclick="p_notation='superset'">Superset</span>

<span title="Animation Type">
<br><script language="JavaScript">document.write('<u>Animation Type<\/u>: ');</script>
<input type="radio" name="animtype" id="animtypesolve" value="solve" onclick="p_animtype='solve'">Solver 
<input type="radio" name="animtype" id="animtypegen" value="gen" onclick="p_animtype='gen'">Generator
</span>

<span title="Color Scheme (FRLBDU)">
<br><script language="JavaScript">document.write('<u>Color Scheme<\/u>: ');</script>
<input type="radio" name="scheme" id="schemegrobyw" value="grobyw" onclick="p_scheme='grobyw';">BOY
<input type="radio" name="scheme" id="schemegroybw" value="groybw" onclick="p_scheme='groybw';">Japanese
<input type="radio" name="scheme" id="schemecustom" value="custom" onclick="p_scheme=schemeinput.value;highlightinput(schemeinput);">
	<input id="schemeinput" type="text" name="schemeinput" value="" onclick="javascript:getElementById('colc').checked=true" onchange="javascript:p_scheme=this.value" size="6"/>
	<script language="JavaScript">schemeinput.value=p_scheme</script>
</span>

<span title="Stage (currently for 3x3x3 ONLY)">
<br><script language="JavaScript">document.write('<u>Stage<\/u>: ');</script>
<input type="radio" name="stage" id="stagefull" value="full" onclick="p_stage='full';">Full
<input type="radio" name="stage" id="stageF2L" value="F2L" onclick="p_stage='F2L';">F2L
<input type="radio" name="stage" id="stageOLL" value="OLL" onclick="p_stage='OLL';">OLL/CLS
<input type="radio" name="stage" id="stageZBLS" value="ZBLS" onclick="p_stage='ZBLS';">ZBLS
<input type="radio" name="stage" id="stageCMLL" value="CMLL" onclick="p_stage='CMLL';">CMLL
</span>
</span>

<script language="JavaScript">
document.getElementById('notation'+p_notation).checked="true";
document.getElementById('animtype'+p_animtype).checked="true";
document.getElementById('scheme'+p_scheme).checked="true";
document.getElementById('stage'+p_stage).checked="true";
</script>

</form>
<button type="button" onclick="showhelp();" style="font-size: 125%">Show Help</button>
<br><br>
<span style="font-family: monospace" title="Everyone loves XKCD. Especially because of the hovertext.">alg.garron.us - v1.1.9beta - by Lucas Garron</span>

</td>
<td name="righthalf" id="righthalf" width="50%" style="vertical-align: top;" >


<br>Loading Applet/Help here...
<script type="text/javascript">
if (window.location.hash=='#help')
	showhelp();
else
	loadapplet();
</script>

</td>
</tr>
</table>


</center>
</body></html>